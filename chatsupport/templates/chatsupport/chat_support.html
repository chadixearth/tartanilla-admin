{% extends 'base.html' %}
{% load static %}

{% block title %}Chat Support - TarTrack{% endblock %}

{% block content %}
<!-- Main Content -->
    <main class="min-h-screen bg-[#f5f5f5] text-[#561c24] font-sans">
        <div class="h-screen flex flex-col"> <!-- Added opening div tag -->
            <!-- Header -->
            {% include "chatsupport/components/chatsupport_header.html" %}

            <!-- Chatsupport Container -->
            <div class="flex-1 flex overflow-hidden">
                <!-- Chatsupport List Sidebar -->
                {% include "chatsupport/components/chatsupport_sidebar.html" %}

                <!-- Chatsupport Messages Area -->
                {% include "chatsupport/components/chatsupport_messages.html" %}
            </div>
        </div>
    </main>

{% endblock content %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="{% static 'js/config/supabase_config.js' %}"></script>
<script src="{% static 'js/conversations/chatsupport_conversation_realtime.js' %}"></script>
<script src="{% static 'js/conversations/chatsupport_conversation_loader.js' %}"></script>
<script src="{% static 'js/conversations/chatsupport_conversation_ui.js' %}"></script>

<script src="{% static 'js/messages/chatsupport_messages_sender.js' %}"></script>
<script src="{% static 'js/messages/chatsupport_messages_ui.js' %}"></script>
<script src="{% static 'js/messages/chatsupport_messages_realtime.js' %}"></script>
<script src="{% static 'js/messages/chatsupport_messages_loader.js' %}"></script>

<script src="{% static 'js/utils/datetime_formatter.js' %}"></script>

<script src="{% static 'js/search/chatsupport_search.js' %}"></script>

<script>
    window.adminUserId = "{{ admin_user_id|escapejs }}";
    // console.log("Admin User ID:", window.adminUserId); // Add this for debugging
</script>
{% endblock extra_js %}